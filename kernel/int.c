#include "int.h"

IRQ_HANDLER(0x20);
IRQ_HANDLER(0x21);
IRQ_HANDLER(0x22);
IRQ_HANDLER(0x23);
IRQ_HANDLER(0x24);
IRQ_HANDLER(0x25);
IRQ_HANDLER(0x26);
IRQ_HANDLER(0x27);
IRQ_HANDLER(0x28);
IRQ_HANDLER(0x29);
IRQ_HANDLER(0x2a);
IRQ_HANDLER(0x2b);
IRQ_HANDLER(0x2c);
IRQ_HANDLER(0x2d);
IRQ_HANDLER(0x2e);
IRQ_HANDLER(0x2f);
IRQ_HANDLER(0x30);
IRQ_HANDLER(0x31);
IRQ_HANDLER(0x32);
IRQ_HANDLER(0x33);
IRQ_HANDLER(0x34);
IRQ_HANDLER(0x35);
IRQ_HANDLER(0x36);
IRQ_HANDLER(0x37);

// 时钟中断
void IRQ_0x20_func(void)
{
	// printk("clock\n");
	io_out8(0x20, 0x20);
	io_out8(0xa0, 0x20);
}

// 键盘中断
void IRQ_0x21_func(void)
{
	unsigned char code = io_in8(0x60);
	// printk("code:%x\n", code);
	io_out8(0x20, 0x20);
	io_out8(0xa0, 0x20);
}
IRQ_FUNC(0x22);
IRQ_FUNC(0x23);
IRQ_FUNC(0x24);
IRQ_FUNC(0x25);
IRQ_FUNC(0x26);
IRQ_FUNC(0x27);
IRQ_FUNC(0x28);
IRQ_FUNC(0x29);
IRQ_FUNC(0x2a);
IRQ_FUNC(0x2b);
IRQ_FUNC(0x2c);
IRQ_FUNC(0x2d);
// 主硬盘中断
void IRQ_0x2e_func(void)
{
	// unsigned char mask = io_in8(0x1f7);
	// printk("damn:%d\n", mask);
	io_out8(0x20, 0x20);
	io_out8(0xa0, 0x20);
}
IRQ_FUNC(0x2f);
IRQ_FUNC(0x30);
IRQ_FUNC(0x31);
IRQ_FUNC(0x32);
IRQ_FUNC(0x33);
IRQ_FUNC(0x34);
IRQ_FUNC(0x35);
IRQ_FUNC(0x36);
IRQ_FUNC(0x37);

void (*interrupt[24])(void) = {
	IRQ_0x20_handler, IRQ_0x21_handler, IRQ_0x22_handler, IRQ_0x23_handler, IRQ_0x24_handler, IRQ_0x25_handler,
	IRQ_0x26_handler, IRQ_0x27_handler, IRQ_0x28_handler, IRQ_0x29_handler, IRQ_0x2a_handler, IRQ_0x2b_handler,
	IRQ_0x2c_handler, IRQ_0x2d_handler, IRQ_0x2e_handler, IRQ_0x2f_handler, IRQ_0x30_handler, IRQ_0x31_handler,
	IRQ_0x32_handler, IRQ_0x33_handler, IRQ_0x34_handler, IRQ_0x35_handler, IRQ_0x36_handler, IRQ_0x37_handler,
};
